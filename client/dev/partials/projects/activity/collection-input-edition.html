<ol class="breadcrumb">
	<li><a ui-sref="main.projects" translate="shared.projects"></a></li>
	<li><a ui-sref="main.project.basics" ng-bind="project.name"></a></li>
	<li><a ui-sref="main.project.collection_input_list" translate="project.collection_input_list"></a></li>
	<li class="active" ng-bind="form.name"></li>
	<li class="active" ng-bind="inputEntity.name" ng-if="inputEntity"></li>
	<li class="active" ng-bind="currentInput.period|amDateFormat:'YYYY-MM-DD'"></li>
</ol>

<doc-reminder pages="project.presentation_project,project.inputs"></doc-reminder>

<div class="panel panel-primary" ng-repeat="section in form.sections">
	<div class="panel-heading" ng-bind="section.name"></div>
	<div class="panel-body">
		<form class="form-horizontal">

			<div class="form-group" ng-repeat="variable in section.elements">
				<label for="raw-{{variable.id}}" class="col-sm-2 control-label" ng-bind="variable.name"></label>
				<div class="col-sm-10">

					<div ng-if="variable.partitions.length == 0"
						 acl-has-project-role="input"
						 acl-fallback="currentInput.values[variable.id]">

						<input class="form-control"
							   ng-model="currentInput.values[variable.id]"
							   placeholder="{{'project.last_input'|translate}}{{previousInput.values[variable.id] || '?'}}"
							   type="number" />
					</div>

					<div ng-if="variable.partitions.length > 0">
						<input-grid variable="variable" data="currentInput.values" old-data="previousInput.values" />
					</div>

				</div>
			</div>
		</form>
	</div>
</div>

<div acl-has-project-role="input">
	<button class="btn btn-default" ng-click="save()">
		<i class="fa fa-floppy-o"></i>
		<span translate="shared.save"></span>
	</button>

	<button class="btn btn-danger" ng-click="delete()" ng-if="!isNew">
		<i class="fa fa-remove"></i>
		<span translate="shared.delete"></span>
	</button>
</div>

<ol class="breadcrumb">
	<li><a ui-sref="main.projects" translate="shared.projects"></a></li>
	<li><a ui-sref="main.project.basics" ng-bind="project.name"></a></li>
	<li><a ui-sref="main.project.collection_input_list" translate="project.collection_input_list"></a></li>
	<li class="active" ng-bind="form.name"></li>
	<li class="active" ng-bind="inputEntity.name" ng-if="inputEntity"></li>
	<li class="active" ng-bind="currentInput.period|amDateFormat:'YYYY-MM-DD'"></li>
</ol>

<doc-reminder pages="project.input"></doc-reminder>


<form class="form-horizontal">
	
	<div class="form-group" ng-repeat="element in form.elements">
		<label class="col-sm-2 control-label">
			{{element.name}}<br/>

			<div style="margin-bottom: 5px" ng-if="element.partitions.length > 1">
				<span style="font-weight: normal">Ordre</span>
				<div class="btn-group btn-group-xs">
					<button ng-click="rotate(-1, element)" class="btn btn-default"><i class="fa fa-caret-left"></i></button>
					<button class="btn btn-default" disabled>{{rotations[element.id] + 1}}</button>
					<button ng-click="rotate(1, element)" class="btn btn-default"><i class="fa fa-caret-right"></i></button>
				</div>
			</div>

			<div style="margin-bottom: 5px" ng-if="element.partitions.length > 2">
				<span style="font-weight: normal">Distribution</span>
				<div class="btn-group btn-group-xs">
					<button ng-click="move(-1, element)" class="btn btn-default"><i class="fa fa-caret-left"></i></button>
					<button class="btn btn-default" disabled>
						C{{positions[element.id] + 1}}
						L{{element.partitions.length - positions[element.id] - 1}}
					</button>
					<button ng-click="move(1, element)" class="btn btn-default"><i class="fa fa-caret-right"></i></button>
				</div>
			</div>

		</label>

		<div class="col-sm-10">
			<input-grid partitions="partitions[element.id]" ng-model="currentInput.values[element.id]" offset="positions[element.id]"></input-grid>
		</div>
	</div>

</form>

<div acl-has-project-role="input">
	<a class="btn btn-primary" ng-click="save()">
		<i class="fa fa-floppy-o"></i>
		<span translate="shared.save"></span>
	</a>

	<a ng-click="reset()" ng-disabled="isUnchanged()" class="btn btn-default">
		<i class="fa fa-undo"></i>
		<span translate="shared.remove_changes"></span>
	</a>

	<a class="btn btn-danger" ng-click="delete()" ng-if="!isNew">
		<i class="fa fa-remove"></i>
		<span translate="shared.delete"></span>
	</a>
</div>

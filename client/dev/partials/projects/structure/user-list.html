<ol class="breadcrumb">
	<li ng-if="userCtx.type == 'user'"><a ui-sref="main.projects" translate="shared.projects"></a></li>
	<li><a ui-sref="main.project.structure.basics" ng-bind="project.name"></a></li>
	<li class="active" translate="project.users"></li>
</ol>


<div class="alert alert-info">
	<p>Plusieurs types d'utilisateurs interviennent dans la mise en place et dans le suivi d'un projet: coordination, staff M&amp;E, opérateurs de saisie, partenaires, ...</p>
	<p>Listez ici tous les utilisateurs qui doivent avoir accès au monitoring du projet.</p>
</div>

<legend translate="project.users"></legend>

<table class="table table-bordered table-stripped table-condensed">
	<thead>
		<tr>
			<th style="width: 30px" acl-has-project-role="owner"></th>
			<th style="width: 30px" ></th>
			<th translate="shared.name"></th>
			<th translate="project.user_role"></th>
			<th translate="project.collection_site_list"></th>
		</tr>
	</thead>
	<tbody ng-if="project.users.length == 0">
		<tr>
			<td colspan="5" style="text-align: center" translate="project.no_users"></td>
		</tr>
	</tbody>

	<tbody ng-if="project.users.length != 0" ng-sortable="{handle: '.handle'}">
		<tr ng-repeat="user in project.users">
			<td class="handle" acl-has-project-role="owner"><i class="fa fa-bars"></i></td>

			<td style="text-align: center">
				<img src="/img/logo_blue.svg" style="height: 17px" ng-if="user.type=='internal'" />
			</td>
			<td>
				<a ng-click="editUser(user)" acl-has-project-role="owner">{{user.name || users[user.id].name}}</a>
				<span acl-lacks-project-role="owner">{{user.name || users[user.id].name}}</span>
			</td>
			<td>{{('project.user_roles.' + user.role)|translate}}</td>
			<td>
				{{user.entities|getObjects:availableEntities|pluck:'name'|translate_list|join:', '}}
			</td>
		</tr>
	</tbody>
	<tfoot acl-has-project-role="owner">
		<tr>
			<td colspan="5" style="text-align: center">
				<a class="btn btn-default btn-xs" ng-click="editUser()">
					<i class="fa fa-plus"></i>
					<span translate="shared.add"></span>
				</a>
			</td>
		</tr>
	</tfoot>
</table>

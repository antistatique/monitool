<ol class="breadcrumb">
	<li><a ui-sref="main.projects" translate="shared.projects"></a></li>
	<li><a ui-sref="main.project.logical_frame" ng-bind="project.name"></a></li>

	<li class="active" translate="shared.reporting"></li>

	<li class="active" ng-if="group" ng-bind="group.name"></li>
	<li class="active" ng-if="entity" ng-bind="entity.name"></li>
</ol>

<reporting-query query="query"></reporting-query>

<form class="form-horizontal noprint" novalidate>
	<div class="row">
		<div class="col-sm-6">
			<div class="form-group">
				<label for="display-input" class="col-sm-2 control-label" translate="shared.display"></label>
				<div class="col-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-eye"></i></span>
						<select class="form-control input-sm" id="display-input" ng-model="presentation.display">
							<option value="value" translate="shared.values"></option>
							<option value="progress" translate="shared.target_percentage"></option>
						</select>
					</div>
				</div>
			</div>
		</div>

		<div class="col-sm-6">
			<div class="form-group">
				<label for="plot-input" class="col-sm-2 control-label" translate="shared.plot"></label>
				<div class="col-sm-10">
					<p class="form-control-static">
						<input type="checkbox" id="plot-input" ng-model="presentation.plot" />
					</p>
				</div>
			</div>
		</div>
	</div>
</form>

<button class="btn btn-primary btn-xs pull-right noprint" ng-show="presentation.plot" svg-save>
	<i class="fa fa-download"></i>
	<span translate="shared.download_plot"></span>
</button>

<div style="clear: both" ng-if="presentation.plot">
	<reporting-graph-adapter
		type="['year', 'month', 'week', 'day'].indexOf(query.groupBy) !== -1 ? 'line' : 'bar'"
		data="stats" plots="plots" display="presentation.display">
	</reporting-graph-adapter>
</div>

<button class="btn btn-primary btn-xs pull-right noprint" project-csv-save style="margin-bottom: 10px;">
	<i class="fa fa-download"></i>
	<span translate="shared.download_table"></span>
</button>

<table class="table table-bordered table-stripped table-condensed project-reporting">
	<thead>
		<tr>
			<th ng-show="presentation.plot" class="noprint"></th>
			<th></th>
			<th translate="project.baseline"></th>
			<th translate="project.target"></th>
			<th ng-repeat="col in stats.cols track by col.id" ng-bind="col.name"></th>
		</tr>
	</thead>
	<tbody>
		<tr ng-repeat="row in (stats|logFrameReport:project) track by $index">
			<td ng-show="presentation.plot" class="noprint">
				<input id="plot-{{row.id}}" type="checkbox" ng-model="plots[row.id]" ng-if="row.type=='data'"/>
			</td>
			<td class="section" ng-class="{indent1:row.indent==1,indent2:row.indent==2}" colspan="{{stats.cols.length + 3}}" ng-if="row.type=='header'" ng-bind="row.text"></td>

			<td ng-if="row.type=='data'" ng-class="{indent1:row.indent==1,indent2:row.indent==2}" >
				<label for="plot-{{row.id}}" ng-bind="row.name||('shared.unknown_indicator'|translate)"></label>
			</td>
			<td ng-if="row.type=='data'">{{row.baseline}}{{row.unit}}</td>
			<td ng-if="row.type=='data'">{{row.target}}{{row.unit}}</td>
			<td ng-if="row.type=='data'" ng-repeat="col in row.cols track by $index" reporting-field></td>
		</tr>
	</tbody>
</table>


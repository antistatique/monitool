<div class="row">
	<div class="col-md-2">
		<ng-include src="'partials/projects/menu.html'"></ng-include>
	</div>

	<div class="col-md-10">

		<ol class="breadcrumb">
			<li><a href="#projects">Projets</a></li>
			<li><a href="#projects/{{project._id}}">{{project.name}}</a></li>
			<li><a href="#projects/{{project._id}}/plannings">Liste des plannings</a></li>
			<li><a href="#projects/{{project._id}}/plannings/{{planningId}}">{{planningG.name}}</a></li>
			<li class="active">{{indicator.name}}</li>
		</ol>

		<form class="form-horizontal" role="form" name="planningForm" novalidate>

			<fieldset>
				<legend>Indicateur</legend>

				<div class="form-group">
					<label for="indicator" class="col-sm-2 control-label">Indicateur</label>
					<div class="col-sm-10">
 						<p class="form-control-static">{{indicator.name}}</p>
					</div>
				</div>

				<div class="form-group" show-errors>
					<label for="source-input" class="col-sm-2 control-label">Source</label>
					<div class="col-sm-10">
						<textarea class="form-control"
								  id="source-input"
								  name="source"
								  ng-model="planning.source"
								  placeholder="Collecté au niveau du ... par ... puis aggrégé et saisi par ..."
								  required></textarea>

						<p class="help-block" ng-if="planningForm.source.$error.required">
							Ce champ est obligatoire
						</p>
					</div>
				</div>

				<div class="form-group" show-errors>
					<label for="relevance-input" class="col-sm-2 control-label">Pertinence</label>
					<div class="col-sm-10">
						<textarea class="form-control"
								  id="relevance-input"
								  name="relevance"
								  ng-model="planning.relevance"
								  placeholder="Permet de quantifier nos progrès sur l'objectif spécifique ..."
								  required></textarea>

						<p class="help-block" ng-if="planningForm.source.$error.required">
							Ce champ est obligatoire
						</p>
					</div>
				</div>
			</fieldset>

			<fieldset>
				<legend>Échelle</legend>

				<div class="row" style="margin-bottom: 15px">
					<label class="col-sm-2 control-label">Limites</label>
					<div class="form-group col-sm-5" show-errors style="margin: 0">
						<input class="form-control"
							   type="number"
							   name="minimum"
							   ng-model="planning.minimum"
							   placeholder="minimum"
							   required
							   ng-max="planning.orangeMinimum" />
					</div>
					<div class="form-group col-sm-5" show-errors style="margin: 0">
						<input class="form-control"
							   type="number"
							   name="maximum"
							   ng-model="planning.maximum"
							   placeholder="maximum"
							   required
							   ng-min="planning.orangeMaximum" />
					</div>
				</div>

				<div class="row" style="margin-bottom: 15px">
					<label class="col-sm-2 control-label">Zone Orange</label>
					<div class="form-group col-sm-5" show-errors style="margin: 0">
						<input class="form-control"
							   type="number"
							   name="orangeMinimum"
							   ng-model="planning.orangeMinimum"
							   placeholder="minimum"
							   ng-min="planning.minimum"
							   ng-max="planning.greenMinimum"
							   required />
					</div>
					<div class="form-group col-sm-5" show-errors style="margin: 0">
						<input class="form-control"
							   type="number"
							   name="orangeMaximum"
							   ng-model="planning.orangeMaximum"
							   placeholder="maximum"
							   ng-min="planning.greenMaximum"
							   ng-max="planning.maximum"
							   required />
					</div>
				</div>

				<div class="row" style="margin-bottom: 15px">
					<label class="col-sm-2 control-label">Zone Verte</label>
					<div class="form-group col-sm-5" show-errors style="margin: 0">
						<input class="form-control"
							   type="number"
							   name="greenMinimum"
							   ng-model="planning.greenMinimum"
							   placeholder="minimum"
							   required
							   ng-min="planning.orangeMinimum"
							   ng-max="planning.greenMaximum" />
					</div>
					<div class="form-group col-sm-5" show-errors style="margin: 0">
						<input class="form-control"
							   type="number"
							   name="greenMaximum"
							   ng-model="planning.greenMaximum"
							   placeholder="maximum"
							   required
							   ng-min="planning.greenMinimum"
							   ng-max="planning.orangeMaximum" />
					</div>
				</div>

				<div class="form-group" show-errors>
					<label for="baseline-input" class="col-sm-2 control-label">Baseline</label>
					<div class="col-sm-10">
						<input class="form-control"
							   id="baseline-input"
							   name="baseline"
							   type="number"
							   ng-model="planning.baseline"
							   placeholder="valeur de référence"
							   ng-min="planning.minimum"
							   ng-max="planning.maximum"
							   required />
					</div>
				</div>
				
				<div class="form-group">
					<label for="targets" class="col-sm-2 control-label">Cibles</label>
					<div class="col-sm-10">
						<div ng-repeat="target in planning.targets" class="row" style="padding-bottom: 10px">
							<div class="col-sm-4">
								<input type="month" class="form-control" ng-model="target.month" />
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" ng-model="target.value" placeholder="valeur"/>
							</div>
							<div class="col-sm-4">
								<button class="btn btn-danger" ng-click="removeTarget(target)">Supprimer</button>
							</div>
						</div>

						<div class="row">
							<div class="col-sm-12">
								<button class="btn btn-default" ng-click="addTarget()">Ajouter une cible</button>
							</div>
						</div>
					</div>
				</div>

			</fieldset>

			<button ng-click="update()"
					ng-disabled="planningForm.$invalid || isUnchanged()"
					class="btn btn-primary">
				Sauvegarder
			</button>

			<button ng-click="reset()"
					ng-disabled="isUnchanged()"
					class="btn btn-default">
				Réinitialiser
			</button>

			<button ng-click="" class="btn btn-danger">Supprimer</button>

		</form>
	</div>
</div>
